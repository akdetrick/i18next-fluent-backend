!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("fluent_conv/ftl2js")):"function"==typeof define&&define.amd?define(["fluent_conv/ftl2js"],e):t.i18nextFluentBackend=e(t.ftl2js)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;let e=[],n=e.forEach,o=e.slice;function i(t,e){if(e&&"object"==typeof e){let n="",o=encodeURIComponent;for(let t in e)n+="&"+o(t)+"="+o(e[t]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function s(t,e,n,o,s){o&&"object"==typeof o&&(s||(o._t=new Date),o=i("",o).slice(1)),e.queryStringParams&&(t=i(t,e.queryStringParams));try{var a;(a=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(o?"POST":"GET",t,1),e.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!e.withCredentials,o&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var r=e.customHeaders;if(r)for(var l in r)a.setRequestHeader(l,r[l]);a.onreadystatechange=function(){a.readyState>3&&n&&n(a.responseText,a)},a.send(o)}catch(t){console&&console.log(t)}}class a{constructor(t,e={}){this.init(t,e),this.type="backend"}init(e,i={}){this.services=e,this.options=function(t){return n.call(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t}(i,this.options||{},{loadPath:"/locales/{{lng}}/{{ns}}.ftl",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e,n){return t(e)},crossDomain:!1,ajax:s})}read(t,e,n){var o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath([t],[e]));let i=this.services.interpolator.interpolate(o,{lng:t,ns:e});this.loadUrl(i,n)}loadUrl(t,e){this.options.ajax(t,this.options,(n,o)=>{if(o.status>=500&&o.status<600)return e("failed loading "+t,!0);if(o.status>=400&&o.status<500)return e("failed loading "+t,!1);let i,s;try{i=this.options.parse(n,t)}catch(e){s="failed parsing "+t+" to json"}if(s)return e(s,!1);e(null,i)})}create(t,e,n,o){"string"==typeof t&&(t=[t]);let i={};i[n]=o||"",t.forEach(t=>{let n=this.services.interpolator.interpolate(this.options.addPath,{lng:t,ns:e});this.options.ajax(n,this.options,function(t,e){},i)})}}return a.type="backend",a});
